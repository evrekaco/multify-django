{% extends "client/base.html" %}
{% load staticfiles %}
{% block EXTRA_HEAD %}
    <link rel="stylesheet" href="{% static "css/jquery.dataTables.css" %}">
{% endblock EXTRA_HEAD %}
{% block MAIN_BLOCK %}

    <div class="row" style="margin-top: 100px">
        <div class="col-lg-5">
            <div class="well well-lg center-block">

                {% if error %}
                    <div class="alert alert-danger" role="alert">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        <span class="sr-only">Error:</span>
                        {{ error }}
                    </div>
                {% endif %}
                {% if success %}
                    <div class="alert alert-success" role="alert">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        <span class="sr-only">Success:</span>
                        {{ success }}
                    </div>
                {% endif %}

                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h2 class="panel-title">Venue Name</h2>
                    </div>
                    <div class="panel-body">
                        {{ client.venue_name }}
                    </div>
                </div>
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h2 class="panel-title">Username</h2>
                    </div>
                    <div class="panel-body">
                        {{ user }}
                    </div>
                </div>
                {% for multify in client.multify_instances %}
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h2 class="panel-title">Multify : {{ multify.device.name }}</h2>
                        </div>
                        <div class="panel-body">
                            Counter : {{ multify.checkin_count }}
                        </div>
                        <div class="panel-body">
                            Unique Count : {{ multify.unique_users }}
                        </div>
                        <div class="panel-body">
                            Related Client's Token : <span
                                style="font-size: xx-small">{{ multify.client.auth_token }}</span>
                        </div>
                        <div class="panel-body">
                            Last Updated : {{ multify.last_updated|timesince }}
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
        <div class="col-lg-7">
            <table id="example" class="table table-striped table-bordered" cellspacing="0" width="100%">
                <thead>
                <tr>
                    <th>Name</th>
                    <th>Surname</th>
                    <th>Check-in Date</th>
                    <!--th>Picture Url</th-->
                </tr>
                </thead>

                <tfoot>
                <tr>
                    <th>Name</th>
                    <th>Surname</th>
                    <th>Check-in Date</th>
                    <!--th>Picture Url</th-->
                </tr>
                </tfoot>
            </table>
        </div>
    </div>
    <div class="row">

        <a href={% url 'django.contrib.auth.views.logout' %} type="button" class="btn btn-default center-block"
           style="width: 50%" id="logout"><span class="glyphicon glyphicon-pencil"
                                                aria-hidden="true"></span> Logout
        </a>
        <a href={% url 'django.contrib.auth.views.password_change' %} type="button" class="btn btn-default center-block"
           style="width: 50%" id="logout"><span class="glyphicon glyphicon-off"
                                                aria-hidden="true"></span> Change Password
        </a>
    </div>

{% endblock MAIN_BLOCK %}


{% block AFTER_JS %}


    <script>
        $(document).ready(function () {
            $('#example').dataTable({
                "ajax": {
                    "url": "/get_checkins/",
                    "type": "GET",

                },
                columns: [
                    {data: 'name'},
                    {data: 'surname'},
                    {data: 'checkin_date'},
                    /* {data: 'pic_url'}*/
                ]
                /*columnDefs: [{
                    "render" : function (data, type, row) {
                        return Date.parse(data).toString();
                    },
                    "targets": 2
                }]*/
            });
        })
        ;
    </script>

{% endblock AFTER_JS %}